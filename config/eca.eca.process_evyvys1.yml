uuid: 066b7aa6-7c9a-467a-8f55-cd3c46677d82
langcode: en
status: true
dependencies:
  config:
    - field.field.paragraph.person_who_approve.field_person
    - field.storage.paragraph.field_person
    - paragraphs.paragraphs_type.person_who_approve
    - views.view.balance
    - views.view.person_approve
  module:
    - eca_base
    - eca_content
    - eca_form
    - eca_tamper
    - eca_user
    - eca_views
id: process_evyvys1
modeller: bpmn_io
label: 'Validation Vacation & Certificate'
version: v1
weight: -10
events:
  Event_1x6jxwe:
    plugin: 'form:form_validate'
    label: 'Validate certificate'
    configuration:
      form_id: node-certificate-form
      entity_type_id: ''
      bundle: ''
      operation: ''
    successors:
      -
        id: Activity_10oiwxk
        condition: ''
  Event_1tiupjq:
    plugin: 'form:form_validate'
    label: 'Validate vacation'
    configuration:
      form_id: node-vacation-form
      entity_type_id: ''
      bundle: ''
      operation: ''
    successors:
      -
        id: Activity_1dvlddl
        condition: ''
  Event_09zi5p4:
    plugin: 'content_entity:reference_selection'
    label: 'Create field_person'
    configuration:
      type: 'paragraph person_who_approve'
      field_name: field_person
      token_name: selectpeople
    successors:
      -
        id: Gateway_0b1o51u
        condition: ''
conditions:
  Flow_1b7hrrh:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[certemployee]'
      right: '[current-user:uid]'
      operator: equal
      type: value
  Flow_0s2x00o:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[unixstartdate]'
      right: '[current-date:raw]'
      operator: lessthan
      type: value
  Flow_10y16yh:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[startvacunix]'
      right: '[current-date:raw]'
      operator: lessthan
      type: value
  Flow_009rady:
    plugin: 'eca_tamper_condition:timetodate'
    configuration:
      date_format: D
      negate: false
      case: false
      left: '[startvacunix]'
      right: Sun
      operator: equal
      type: value
  Flow_0dstamj:
    plugin: 'eca_tamper_condition:timetodate'
    configuration:
      date_format: D
      negate: false
      case: false
      left: '[startvacunix]'
      right: Sat
      operator: equal
      type: value
  Flow_17ez20o:
    plugin: 'eca_tamper_condition:timetodate'
    configuration:
      date_format: D
      negate: false
      case: false
      left: '[endvacunix]'
      right: Sun
      operator: equal
      type: value
  Flow_1h14fti:
    plugin: 'eca_tamper_condition:timetodate'
    configuration:
      date_format: D
      negate: false
      case: false
      left: '[endvacunix]'
      right: Sun
      operator: equal
      type: value
  Flow_1xbeabb:
    plugin: eca_scalar
    configuration:
      case: false
      left: '[countcert]'
      right: '0'
      operator: equal
      type: value
      negate: true
  Flow_1la69qk:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[countcert]'
      right: '0'
      operator: equal
      type: value
  Flow_1of7as7:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[typevac]'
      right: '1'
      operator: equal
      type: value
  Flow_11p3zlb:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[numbday]'
      right: '[balance]'
      operator: greaterthan
      type: value
  Flow_0uujeou:
    plugin: eca_scalar
    configuration:
      case: false
      left: '[balance]'
      right: '1'
      operator: equal
      type: value
      negate: true
  Flow_1yyu7vi:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[balance]'
      right: '1'
      operator: equal
      type: value
  Flow_1kzawc7:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: developer_junior
  Flow_02wmraj:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: developer_middle
  Flow_0dpcrri:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: developer_senior
  Flow_1hh9ogw:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: shief_pm
  Flow_1t81smb:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: head_of_department
  Flow_0aqq9ta:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: teamlead
  Flow_0shdsv2:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: pm
  Flow_1kbzoki:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: sales
  Flow_00q94vi:
    plugin: eca_scalar
    configuration:
      case: false
      left: '[countperson]'
      right: '0'
      operator: equal
      type: value
      negate: true
  Flow_1bdy78q:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[countperson]'
      right: '0'
      operator: equal
      type: value
  Flow_13wgsjr:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: developer_junior
  Flow_00ljuix:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: developer_middle
  Flow_1tdckn9:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: developer_senior
  Flow_1blrlbw:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: pm
  Flow_0sjwtts:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: teamlead
  Flow_17q7tue:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: head_of_department
  Flow_0r3vzzn:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: shief_pm
  Flow_140f5hy:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: marketing
  Flow_1hj5t6d:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: recruiting
  Flow_1b5jyos:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: hr
  Flow_1oroem2:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: om
  Flow_1y3w0gy:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: accounting
  Flow_0jrw9ry:
    plugin: eca_current_user_role
    configuration:
      negate: false
      role: admin_staff
  Flow_19sjxqg:
    plugin: eca_current_user_role
    configuration:
      role: developer_junior
      negate: true
  Flow_0l9cs2v:
    plugin: eca_current_user_role
    configuration:
      role: developer_middle
      negate: true
  Flow_1dswxc0:
    plugin: eca_current_user_role
    configuration:
      role: developer_senior
      negate: true
  Flow_1o0djhu:
    plugin: eca_current_user_role
    configuration:
      role: pm
      negate: true
  Flow_1pqdc8l:
    plugin: eca_current_user_role
    configuration:
      role: shief_pm
      negate: true
  Flow_1lwq5n2:
    plugin: eca_current_user_role
    configuration:
      role: teamlead
      negate: true
  Flow_1h5ohmo:
    plugin: eca_current_user_role
    configuration:
      role: head_of_department
      negate: true
  Flow_1afurht:
    plugin: eca_current_user_role
    configuration:
      role: ceo
      negate: true
  Flow_0r86yzq:
    plugin: eca_current_user_role
    configuration:
      role: client
      negate: true
gateways:
  Gateway_0riv56h:
    type: 0
    successors:
      -
        id: Activity_0c6euzb
        condition: Flow_1xbeabb
      -
        id: Activity_0pvf0t0
        condition: Flow_1la69qk
  Gateway_0t7wu80:
    type: 0
    successors:
      -
        id: Activity_0tc3gj8
        condition: Flow_0uujeou
      -
        id: Activity_117kvko
        condition: Flow_1yyu7vi
  Gateway_0b1o51u:
    type: 0
    successors:
      -
        id: Activity_0klc9j7
        condition: Flow_1kzawc7
      -
        id: Activity_0klc9j7
        condition: Flow_02wmraj
      -
        id: Activity_0klc9j7
        condition: Flow_0dpcrri
      -
        id: Activity_17s4sx2
        condition: Flow_1hh9ogw
      -
        id: Activity_17s4sx2
        condition: Flow_1t81smb
      -
        id: Activity_17s4sx2
        condition: Flow_0aqq9ta
      -
        id: Activity_0okihrh
        condition: Flow_0shdsv2
      -
        id: Activity_0tlbn95
        condition: Flow_1kbzoki
      -
        id: Activity_0tlbn95
        condition: Flow_140f5hy
      -
        id: Activity_0tlbn95
        condition: Flow_1hj5t6d
      -
        id: Activity_0tlbn95
        condition: Flow_1b5jyos
      -
        id: Activity_0tlbn95
        condition: Flow_1oroem2
      -
        id: Activity_0tlbn95
        condition: Flow_1y3w0gy
      -
        id: Activity_0tlbn95
        condition: Flow_0jrw9ry
  Gateway_11bq3cu:
    type: 0
    successors:
      -
        id: Activity_1cpymx3
        condition: Flow_00q94vi
      -
        id: Activity_1wbctjg
        condition: Flow_1bdy78q
  Gateway_0mektns:
    type: 0
    successors:
      -
        id: Gateway_1sw2u5t
        condition: Flow_13wgsjr
      -
        id: Gateway_1sw2u5t
        condition: Flow_00ljuix
      -
        id: Gateway_1sw2u5t
        condition: Flow_1tdckn9
      -
        id: Activity_0hpbudn
        condition: Flow_1blrlbw
      -
        id: Gateway_0oyj2a9
        condition: Flow_0sjwtts
      -
        id: Gateway_0oyj2a9
        condition: Flow_17q7tue
      -
        id: Gateway_0oyj2a9
        condition: Flow_0r3vzzn
      -
        id: Gateway_0obb9nf
        condition: Flow_19sjxqg
      -
        id: Gateway_0obb9nf
        condition: Flow_0l9cs2v
      -
        id: Gateway_0obb9nf
        condition: Flow_1dswxc0
      -
        id: Gateway_0obb9nf
        condition: Flow_1o0djhu
      -
        id: Gateway_0g0ewaa
        condition: Flow_1pqdc8l
      -
        id: Gateway_0obb9nf
        condition: Flow_1lwq5n2
      -
        id: Gateway_0g0ewaa
        condition: Flow_1h5ohmo
      -
        id: Gateway_0g0ewaa
        condition: Flow_1afurht
      -
        id: Gateway_0g0ewaa
        condition: Flow_0r86yzq
  Gateway_1sw2u5t:
    type: 0
    successors:
      -
        id: Activity_1ss7h9o
        condition: ''
  Gateway_0oyj2a9:
    type: 0
    successors:
      -
        id: Activity_1p1yjr5
        condition: ''
  Gateway_0obb9nf:
    type: 0
    successors:
      -
        id: Activity_1fg434p
        condition: ''
  Gateway_0g0ewaa:
    type: 0
    successors:
      -
        id: Activity_1fg434p
        condition: ''
  Gateway_1ke6lr2:
    type: 0
    successors:
      -
        id: Activity_1kxydd7
        condition: ''
actions:
  Activity_191wffh:
    plugin: eca_form_field_set_error
    label: 'ERROR: Certificate for yourself'
    configuration:
      message: 'You cannot provide yourself with a certificate!'
      field_name: op
    successors: {  }
  Activity_10oiwxk:
    plugin: eca_form_field_get_value
    label: 'Check value field_employee'
    configuration:
      token_name: certemployee
      field_name: field_employee.0.target_id
      strip_tags: true
      trim: true
      xss_filter: true
    successors:
      -
        id: Activity_191wffh
        condition: Flow_1b7hrrh
      -
        id: Activity_1bchrvq
        condition: ''
  Activity_1bchrvq:
    plugin: eca_form_field_get_value
    label: 'Get value start date'
    configuration:
      token_name: startdate
      field_name: field_period_of_validity.0.value
      strip_tags: true
      trim: true
      xss_filter: true
    successors:
      -
        id: Activity_0id92iz
        condition: ''
  Activity_18sltp8:
    plugin: eca_form_field_set_error
    label: 'ERROR: You cannot take on past days'
    configuration:
      message: 'You cannot take on past days!'
      field_name: op
    successors: {  }
  Activity_0id92iz:
    plugin: 'eca_tamper:strtotime'
    label: 'Convert to UNIX'
    configuration:
      eca_data: '[startdate]'
      eca_token_name: '[unixstartdate]'
    successors:
      -
        id: Activity_18sltp8
        condition: Flow_0s2x00o
  Activity_1dvlddl:
    plugin: eca_form_field_get_value
    label: 'Get start date vacation'
    configuration:
      token_name: startvac
      field_name: field_range.0.value
      strip_tags: true
      trim: true
      xss_filter: true
    successors:
      -
        id: Activity_15l7dtc
        condition: ''
      -
        id: Activity_18kqzsm
        condition: ''
  Activity_040zn6o:
    plugin: eca_form_field_set_error
    label: 'ERROR: You cannot take on past days'
    configuration:
      message: 'You cannot take on past days!'
      field_name: op
    successors: {  }
  Activity_15l7dtc:
    plugin: 'eca_tamper:strtotime'
    label: 'Convert to UNIX'
    configuration:
      eca_data: '[startvac]'
      eca_token_name: startvacunix
    successors:
      -
        id: Activity_040zn6o
        condition: Flow_10y16yh
      -
        id: Activity_03akgun
        condition: Flow_009rady
      -
        id: Activity_03akgun
        condition: Flow_0dstamj
  Activity_03akgun:
    plugin: eca_form_field_set_error
    label: 'ERROR: Sun and Sat'
    configuration:
      message: 'You cannot start vacation on Saturday and Sunday. Сhoose another date!'
      field_name: op
    successors: {  }
  Activity_18kqzsm:
    plugin: eca_form_field_get_value
    label: 'Get end date vacation'
    configuration:
      token_name: endvac
      field_name: field_range.0.end_value
      strip_tags: true
      trim: true
      xss_filter: true
    successors:
      -
        id: Activity_02y7k8o
        condition: ''
      -
        id: Activity_0fedyok
        condition: ''
  Activity_02y7k8o:
    plugin: 'eca_tamper:strtotime'
    label: 'Convert to UNIX'
    configuration:
      eca_data: '[endvac]'
      eca_token_name: endvacunix
    successors:
      -
        id: Activity_138ah2e
        condition: ''
      -
        id: Activity_0932pmb
        condition: Flow_17ez20o
      -
        id: Activity_0932pmb
        condition: Flow_1h14fti
  Activity_0932pmb:
    plugin: eca_form_field_set_error
    label: 'ERROR: Sun and Sat'
    configuration:
      message: 'You cannot start vacation on Saturday and Sunday. Сhoose another date!'
      field_name: op
    successors: {  }
  Activity_05u4q7j:
    plugin: eca_views_query
    label: 'Load Balance [balanceview]'
    configuration:
      token_name: balanceview
      view_id: balance
      display_id: block_1
      arguments: ''
    successors:
      -
        id: Activity_036n9xt
        condition: ''
  Activity_036n9xt:
    plugin: eca_count
    label: 'Count user''s certificate [countcert]'
    configuration:
      token_name: countcert
      list_token: balanceview
    successors:
      -
        id: Activity_0qlm72c
        condition: ''
  Activity_0qlm72c:
    plugin: eca_token_set_value
    label: 'Token 0 [balance]'
    configuration:
      token_name: balance
      token_value: '0'
      use_yaml: false
    successors:
      -
        id: Gateway_0riv56h
        condition: ''
  Activity_0c6euzb:
    plugin: 'eca_tamper:math'
    label: 'Add field_remainder to balance'
    configuration:
      operation: addition
      flip: false
      value: '[balanceview:0:field_remainder]'
      eca_data: '[balance]'
      eca_token_name: balance
    successors:
      -
        id: Activity_0vujbqn
        condition: ''
  Activity_0vujbqn:
    plugin: 'eca_tamper:math'
    label: 'Subtraction 1 from countcert'
    configuration:
      operation: subtraction
      flip: false
      value: '1'
      eca_data: '[countcert]'
      eca_token_name: countcert
    successors:
      -
        id: Activity_06otyig
        condition: ''
  Activity_06otyig:
    plugin: eca_list_remove
    label: 'Drop first from [balanceview]'
    configuration:
      value: ''
      token_name: ''
      method: first
      index: ''
      list_token: balanceview
    successors:
      -
        id: Gateway_0riv56h
        condition: ''
  Activity_138ah2e:
    plugin: eca_form_field_get_value
    label: 'Get type vacation'
    configuration:
      token_name: typevac
      field_name: field_type_vacation.0.target_id
      strip_tags: true
      trim: true
      xss_filter: true
    successors:
      -
        id: Activity_05u4q7j
        condition: Flow_1of7as7
  Activity_0pvf0t0:
    plugin: 'eca_tamper:math'
    label: 'Vacation period in UNIX [numbvac]'
    configuration:
      operation: subtraction
      flip: false
      value: '[startvacunix]'
      eca_data: '[endvacunix]'
      eca_token_name: numbvac
    successors:
      -
        id: Activity_1t9veqt
        condition: ''
  Activity_0tc3gj8:
    plugin: eca_form_field_set_error
    label: 'ERROR: Not enough days. Balance: * days'
    configuration:
      message: 'Not enough days on the balance! Your balance - [balance] days'
      field_name: op
    successors: {  }
  Activity_1t9veqt:
    plugin: 'eca_tamper:timetodate'
    label: 'Vacation period in days [numbday]'
    configuration:
      date_format: d
      eca_data: '[numbvac]'
      eca_token_name: numbday
    successors:
      -
        id: Gateway_0t7wu80
        condition: Flow_11p3zlb
  Activity_117kvko:
    plugin: eca_form_field_set_error
    label: 'ERROR: Not enough days. Balance: 1 day'
    configuration:
      message: 'Not enough days on the balance! Your balance - [balance] day'
      field_name: op
    successors: {  }
  Activity_0fedyok:
    plugin: eca_form_field_get_value
    label: 'Get field_approve'
    configuration:
      token_name: approve
      field_name: field_approve
      strip_tags: true
      trim: true
      xss_filter: true
    successors:
      -
        id: Activity_0mk4hr8
        condition: ''
  Activity_0klc9j7:
    plugin: eca_views_query
    label: 'Load teamleads using view [teamleads]'
    configuration:
      token_name: teamleads
      view_id: person_approve
      display_id: block_1
      arguments: teamlead
    successors:
      -
        id: Activity_0cst5b4
        condition: ''
  Activity_0okihrh:
    plugin: eca_views_query
    label: 'Load chiefs pm using view [chiefspm]'
    configuration:
      token_name: chiefspm
      view_id: person_approve
      display_id: block_1
      arguments: shief_pm
    successors:
      -
        id: Activity_1vhhnxy
        condition: ''
  Activity_17s4sx2:
    plugin: eca_views_query
    label: 'Load ceo using view [ceo]'
    configuration:
      token_name: ceo
      view_id: person_approve
      display_id: block_1
      arguments: ceo
    successors:
      -
        id: Activity_11gulh5
        condition: ''
  Activity_0cst5b4:
    plugin: eca_views_query
    label: 'Load pms using view [pms]'
    configuration:
      token_name: pms
      view_id: person_approve
      display_id: block_1
      arguments: pm
    successors:
      -
        id: Activity_1mb8lwh
        condition: ''
  Activity_1mb8lwh:
    plugin: eca_views_query
    label: 'Load chiefs pm using view [chiefspm]'
    configuration:
      token_name: chiefspm
      view_id: person_approve
      display_id: block_1
      arguments: shief_pm
    successors:
      -
        id: Activity_09quwo9
        condition: ''
  Activity_09quwo9:
    plugin: eca_views_query
    label: 'Load clients using view [clients]'
    configuration:
      token_name: clients
      view_id: person_approve
      display_id: block_1
      arguments: client
    successors:
      -
        id: Activity_1f49a56
        condition: ''
  Activity_1f49a56:
    plugin: eca_list_add_entity
    label: 'Add teamleads to selectpeople'
    configuration:
      method: append
      index: ''
      list_token: selectpeople
      object: teamleads
    successors:
      -
        id: Activity_09e973t
        condition: ''
  Activity_09e973t:
    plugin: eca_list_add_entity
    label: 'Add pms to selectpeople'
    configuration:
      method: append
      index: ''
      list_token: selectpeople
      object: pms
    successors:
      -
        id: Activity_1432no8
        condition: ''
  Activity_1432no8:
    plugin: eca_list_add_entity
    label: 'Add chiefs pm to selectpeople'
    configuration:
      method: append
      index: ''
      list_token: selectpeople
      object: chiefspm
    successors:
      -
        id: Activity_0xo84g6
        condition: ''
  Activity_0xo84g6:
    plugin: eca_list_add_entity
    label: 'Add clients to selectpeople'
    configuration:
      method: append
      index: ''
      list_token: selectpeople
      object: clients
    successors: {  }
  Activity_1vhhnxy:
    plugin: eca_views_query
    label: 'Load clients using view [clients]'
    configuration:
      token_name: clients
      view_id: person_approve
      display_id: block_1
      arguments: client
    successors:
      -
        id: Activity_0ziz9fc
        condition: ''
  Activity_0ziz9fc:
    plugin: eca_list_add_entity
    label: 'Add chiefs pm to selectpeople'
    configuration:
      method: append
      index: ''
      list_token: selectpeople
      object: chiefspm
    successors:
      -
        id: Activity_1pup40u
        condition: ''
  Activity_1pup40u:
    plugin: eca_list_add_entity
    label: 'Add clients to selectpeople'
    configuration:
      method: append
      index: ''
      list_token: selectpeople
      object: clients
    successors: {  }
  Activity_11gulh5:
    plugin: eca_list_add_entity
    label: 'Add ceo to selectpeople'
    configuration:
      method: append
      index: ''
      list_token: selectpeople
      object: ceo
    successors: {  }
  Activity_0tlbn95:
    plugin: eca_views_query
    label: 'Load head of departaments using view [headofdepartament]'
    configuration:
      token_name: headofdepartament
      view_id: person_approve
      display_id: block_1
      arguments: head_of_department
    successors:
      -
        id: Activity_1qz9qaf
        condition: ''
  Activity_1qz9qaf:
    plugin: eca_list_add_entity
    label: 'Add head of departament to selectpeople'
    configuration:
      method: append
      index: ''
      list_token: selectpeople
      object: headofdepartament
    successors: {  }
  Activity_1wbctjg:
    plugin: eca_form_field_set_error
    label: Activity_1wbctjg
    configuration:
      message: '[roles]'
      field_name: op
    successors:
      -
        id: Gateway_0mektns
        condition: ''
  Activity_0mk4hr8:
    plugin: eca_count
    label: 'Count person + 1 [countperson]'
    configuration:
      token_name: countperson
      list_token: approve
    successors:
      -
        id: Activity_18c4stk
        condition: ''
  Activity_18c4stk:
    plugin: 'eca_tamper:math'
    label: 'countperson - 1'
    configuration:
      operation: subtraction
      flip: false
      value: '1'
      eca_data: '[countperson]'
      eca_token_name: countperson
    successors:
      -
        id: Gateway_11bq3cu
        condition: ''
  Activity_1r6hn6c:
    plugin: 'eca_tamper:math'
    label: 'countperson - 1 '
    configuration:
      operation: subtraction
      flip: false
      value: '1'
      eca_data: '[countperson]'
      eca_token_name: countperson
    successors:
      -
        id: Activity_0varulp
        condition: ''
      -
        id: Gateway_11bq3cu
        condition: ''
  Activity_1cpymx3:
    plugin: eca_token_set_value
    label: 'Get person ID [person]'
    configuration:
      token_name: person
      token_value: '[approve]'
      use_yaml: false
    successors:
      -
        id: Activity_0j04v27
        condition: ''
  Activity_1q1a852:
    plugin: eca_token_load_entity
    label: 'Load user by ID'
    configuration:
      token_name: userapp
      from: id
      entity_type: user
      entity_id: '[person]'
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_1djq364
        condition: ''
  Activity_1djq364:
    plugin: eca_token_set_value
    label: 'Get person roles [personroles]'
    configuration:
      token_name: personroles
      token_value: '[userapp:roles]'
      use_yaml: false
    successors:
      -
        id: Activity_0qw9m95
        condition: ''
  Activity_0qw9m95:
    plugin: eca_token_set_value
    label: 'Get person role [personrole]'
    configuration:
      token_name: personrole
      token_value: '[personroles:0:target_id]'
      use_yaml: false
    successors: {  }
  Activity_0j04v27:
    plugin: eca_list_add
    label: 'Add [personrole] to [roles]'
    configuration:
      value: '[person]'
      method: append
      index: ''
      list_token: roles
    successors:
      -
        id: Activity_0tizhbm
        condition: ''
  Activity_18m3hyb:
    plugin: eca_token_set_value
    label: 'First role to [frole]'
    configuration:
      token_name: frole
      token_value: '[roles:0]'
      use_yaml: false
    successors:
      -
        id: Activity_1c4c98y
        condition: ''
  Activity_1dyf0db:
    plugin: eca_count
    label: 'Count [roles] as [countroles]'
    configuration:
      token_name: countroles
      list_token: roles
    successors:
      -
        id: Activity_18m3hyb
        condition: ''
  Activity_1c4c98y:
    plugin: eca_list_remove
    label: 'Drop first '
    configuration:
      value: ''
      token_name: ''
      method: first
      index: ''
      list_token: roles
    successors: {  }
  Activity_1ss7h9o:
    plugin: eca_list_add
    label: 'Add pm to list [mustapprove]'
    configuration:
      value: pm
      method: append
      index: ''
      list_token: mustapprove
    successors:
      -
        id: Activity_1mnat5x
        condition: ''
  Activity_1mnat5x:
    plugin: eca_list_add
    label: 'Add pm to list [mustapprove]'
    configuration:
      value: teamlead
      method: append
      index: ''
      list_token: mustapprove
    successors:
      -
        id: Activity_1ar8vs8
        condition: ''
  Activity_1ar8vs8:
    plugin: eca_list_add
    label: 'Add chief pm to list [mustapprove]'
    configuration:
      value: shief_pm
      method: append
      index: ''
      list_token: mustapprove
    successors:
      -
        id: Gateway_1ke6lr2
        condition: ''
  Activity_0hpbudn:
    plugin: eca_list_add
    label: 'Add chief pm to list [mustapprove]'
    configuration:
      value: shief_pm
      method: append
      index: ''
      list_token: mustapprove
    successors:
      -
        id: Gateway_1ke6lr2
        condition: ''
  Activity_1p1yjr5:
    plugin: eca_list_add
    label: 'Add ceo to list [mustapprove]'
    configuration:
      value: ceo
      method: append
      index: ''
      list_token: mustapprove
    successors:
      -
        id: Gateway_1ke6lr2
        condition: ''
  Activity_1fg434p:
    plugin: eca_list_add
    label: 'Add head of departament to list [mustapprove]'
    configuration:
      value: head_of_department
      method: append
      index: ''
      list_token: mustapprove
    successors:
      -
        id: Gateway_1ke6lr2
        condition: ''
  Activity_1kxydd7:
    plugin: eca_count
    label: 'Save count [mustapprove] as [numbapp]'
    configuration:
      token_name: numbapp
      list_token: mustapprove
    successors:
      -
        id: Activity_1dyf0db
        condition: ''
  Activity_1101l5r:
    plugin: eca_list_remove
    label: Activity_1101l5r
    configuration:
      value: ''
      token_name: ''
      method: first
      index: ''
      list_token: approve
    successors: {  }
  Activity_0varulp:
    plugin: action_message_action
    label: Activity_0varulp
    configuration:
      replace_tokens: false
      message: '[approve]'
    successors: {  }
  Activity_0tizhbm:
    plugin: eca_list_remove_entity
    label: 'Drop first from [approve]'
    configuration:
      token_name: ''
      method: last
      index: ''
      list_token: person
      object: ''
    successors:
      -
        id: Activity_1r6hn6c
        condition: ''
  Activity_121xgsw:
    plugin: eca_form_field_set_error
    label: Activity_121xgsw
    configuration:
      message: '[approve]'
      field_name: op
    successors: {  }
