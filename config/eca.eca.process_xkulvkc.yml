uuid: 1fcd0462-4dfd-4ff0-bbd9-096f18cc7e4b
langcode: en
status: false
dependencies:
  config:
    - field.field.node.certificate.field_date_creation
    - field.field.node.certificate.field_employee
    - field.field.node.certificate.field_issued_days
    - field.field.node.certificate.field_remainder
    - field.storage.node.field_date_creation
    - field.storage.node.field_employee
    - field.storage.node.field_issued_days
    - field.storage.node.field_remainder
    - node.type.certificate
  module:
    - eca_base
    - eca_content
    - eca_queue
    - eca_user
    - node
    - user
id: process_xkulvkc
modeller: bpmn_io
label: 'Set value into Certificate'
version: v1
weight: -10
events:
  Event_0azw4w1:
    plugin: 'eca_queue:processing_task'
    label: 'Task [delaysertificate]'
    configuration:
      distribute: false
      task_name: delaysertificate
      task_value: ''
      cron: ''
    successors:
      -
        id: Activity_1yfeyl9
        condition: ''
  Event_1umtqxz:
    plugin: 'content_entity:insert'
    label: 'Insert User'
    configuration:
      type: 'user user'
    successors:
      -
        id: Activity_0sf03tt
        condition: ''
      -
        id: Activity_0daw65u
        condition: ''
  Event_0poygja:
    plugin: 'eca_queue:processing_task'
    label: Event_0poygja
    configuration:
      distribute: false
      task_name: burn
      task_value: ''
      cron: ''
    successors:
      -
        id: Activity_1uxuget
        condition: ''
conditions:
  Flow_10rcmug:
    plugin: eca_user_role
    configuration:
      negate: false
      account: '[employee]'
      role: developer_middle
  Flow_0nyymc5:
    plugin: eca_user_role
    configuration:
      negate: false
      account: '[employee]'
      role: developer_senior
  Flow_1gy2cvw:
    plugin: eca_user_role
    configuration:
      negate: false
      account: '[employee]'
      role: pm
gateways:
  Gateway_043sdx6:
    type: 0
    successors:
      -
        id: Activity_04oobn0
        condition: Flow_10rcmug
      -
        id: Activity_1x0xlzh
        condition: Flow_0nyymc5
      -
        id: Activity_04oobn0
        condition: Flow_1gy2cvw
      -
        id: Activity_04aemay
        condition: ''
  Gateway_1c0jzux:
    type: 0
    successors:
      -
        id: Activity_0y9if4d
        condition: ''
actions:
  Activity_12jvxut:
    plugin: eca_enqueue_task_delayed
    label: 'Queue task'
    configuration:
      delay_value: '1'
      delay_unit: '60'
      task_name: delaysertificate
      task_value: ''
      tokens: employee
    successors:
      -
        id: Activity_0sjrv5c
        condition: ''
  Activity_0gr7n7o:
    plugin: eca_new_entity
    label: 'Create certificate'
    configuration:
      token_name: certificate
      type: 'node certificate'
      langcode: en
      label: ''
      published: true
      owner: '[employee:uid]'
    successors:
      -
        id: Activity_0ya2jl3
        condition: ''
      -
        id: Activity_10rnhbw
        condition: ''
  Activity_1yfeyl9:
    plugin: eca_switch_account
    label: 'User to admin'
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_0gr7n7o
        condition: ''
      -
        id: Activity_01l0h6r
        condition: ''
  Activity_0ya2jl3:
    plugin: eca_set_field_value
    label: 'Set title'
    configuration:
      field_name: title
      field_value: 'Certificate #[random:number]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: certificate
    successors:
      -
        id: Activity_1mpchlu
        condition: ''
      -
        id: Activity_0h3562s
        condition: ''
  Activity_0h3562s:
    plugin: eca_set_field_value
    label: 'Set employee'
    configuration:
      field_name: field_employee
      field_value: '[employee:uid]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: certificate
    successors:
      -
        id: Gateway_043sdx6
        condition: ''
      -
        id: Activity_107r8jx
        condition: ''
  Activity_0sf03tt:
    plugin: action_message_action
    label: Activity_0sf03tt
    configuration:
      replace_tokens: false
      message: '1'
    successors: {  }
  Activity_1c8uugl:
    plugin: action_message_action
    label: Activity_1c8uugl
    configuration:
      replace_tokens: false
      message: '2 [employee:uid] - [employee:display-name]'
    successors: {  }
  Activity_0sjrv5c:
    plugin: action_message_action
    label: Activity_0sjrv5c
    configuration:
      replace_tokens: false
      message: '3'
    successors: {  }
  Activity_01l0h6r:
    plugin: action_message_action
    label: Activity_01l0h6r
    configuration:
      replace_tokens: false
      message: '4'
    successors: {  }
  Activity_10rnhbw:
    plugin: action_message_action
    label: Activity_10rnhbw
    configuration:
      replace_tokens: false
      message: '5'
    successors: {  }
  Activity_1mpchlu:
    plugin: action_message_action
    label: Activity_1mpchlu
    configuration:
      replace_tokens: false
      message: '6'
    successors: {  }
  Activity_107r8jx:
    plugin: action_message_action
    label: Activity_107r8jx
    configuration:
      replace_tokens: false
      message: '7'
    successors: {  }
  Activity_1idgnve:
    plugin: action_message_action
    label: Activity_1idgnve
    configuration:
      replace_tokens: false
      message: '10'
    successors: {  }
  Activity_04aemay:
    plugin: action_message_action
    label: Activity_04aemay
    configuration:
      replace_tokens: false
      message: '8 - setup 7'
    successors:
      -
        id: Gateway_1c0jzux
        condition: ''
  Activity_0i7ejre:
    plugin: eca_token_set_value
    label: 'Load user name'
    configuration:
      token_name: employee
      token_value: '[registartion]'
      use_yaml: false
    successors:
      -
        id: Activity_12jvxut
        condition: ''
      -
        id: Activity_1c8uugl
        condition: ''
  Activity_03gs3b2:
    plugin: eca_set_field_value
    label: 'Set current date'
    configuration:
      field_name: field_date_creation
      field_value: '[current-date:medium]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: certificate
    successors:
      -
        id: Activity_1idgnve
        condition: ''
      -
        id: Activity_0u01q4q
        condition: ''
  Activity_0daw65u:
    plugin: eca_token_load_entity
    label: 'Load entity user'
    configuration:
      token_name: registartion
      from: current
      entity_type: _none
      entity_id: ''
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_0i7ejre
        condition: ''
      -
        id: Activity_0bm7713
        condition: ''
  Activity_0bm7713:
    plugin: action_message_action
    label: Activity_0bm7713
    configuration:
      replace_tokens: false
      message: '1.1'
    successors: {  }
  Activity_04oobn0:
    plugin: eca_set_field_value
    label: 'Set Issued Days [9]'
    configuration:
      field_name: field_issued_days
      field_value: '9'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: certificate
    successors:
      -
        id: Activity_08bvjbk
        condition: ''
  Activity_1x0xlzh:
    plugin: eca_set_field_value
    label: 'Set Issued Days [11]'
    configuration:
      field_name: field_issued_days
      field_value: '11'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: certificate
    successors:
      -
        id: Gateway_1c0jzux
        condition: ''
      -
        id: Activity_1n5h10e
        condition: ''
  Activity_1n5h10e:
    plugin: action_message_action
    label: Activity_1n5h10e
    configuration:
      replace_tokens: false
      message: '8 - setup 11'
    successors: {  }
  Activity_08bvjbk:
    plugin: action_message_action
    label: Activity_08bvjbk
    configuration:
      replace_tokens: false
      message: '8 - setup 9'
    successors:
      -
        id: Gateway_1c0jzux
        condition: ''
  Activity_0u01q4q:
    plugin: eca_enqueue_task_delayed
    label: 'Queue task'
    configuration:
      delay_value: '1'
      delay_unit: '60'
      task_name: delaysertificate
      task_value: ''
      tokens: employee
    successors:
      -
        id: Activity_030rfmp
        condition: ''
      -
        id: Activity_1ojm3ce
        condition: ''
  Activity_030rfmp:
    plugin: action_message_action
    label: Activity_030rfmp
    configuration:
      replace_tokens: false
      message: '11'
    successors: {  }
  Activity_1ojm3ce:
    plugin: eca_enqueue_task_delayed
    label: 'Queue task'
    configuration:
      delay_value: '90'
      delay_unit: '1'
      task_name: burn
      task_value: ''
      tokens: certificate
    successors: {  }
  Activity_1xywubi:
    plugin: action_message_action
    label: Activity_1xywubi
    configuration:
      replace_tokens: false
      message: '23'
    successors: {  }
  Activity_1uxuget:
    plugin: 'entity:unpublish_action:node'
    label: Activity_1uxuget
    configuration:
      object: '[certificate]'
    successors:
      -
        id: Activity_1xywubi
        condition: ''
  Activity_0y9if4d:
    plugin: eca_set_field_value
    label: 'Set Remainder [Issued day]'
    configuration:
      field_name: field_remainder
      field_value: '[certificate:field_issued_days:value]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: certificate
    successors:
      -
        id: Activity_03gs3b2
        condition: ''
      -
        id: Activity_14qgkhw
        condition: ''
  Activity_14qgkhw:
    plugin: action_message_action
    label: Activity_14qgkhw
    configuration:
      replace_tokens: false
      message: '9'
    successors: {  }
